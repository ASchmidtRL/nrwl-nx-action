name: 'Nrwl Nx'
author: 'Mansa Group'
description: 'Wrap the Nx monorepo tool and execute tasks depending on the action context'
inputs:
  targets:
    description: "Comma-separated list of targets to execute"
    required: true
  projects:
    description: "Comma-separated list of projects to use"
    required: true
  all: # Mutualy exclusive with `affected`
    description: "Run the targets on all projects"
    required: false
    default: 'false'
  affected: # Mutualy exclusive with `all`
    description: "Use the Nx' affected subcommand to only process affected projects"
    required: false
    default: 'true'
  parallel:
    description: "Run the tasks in parallel (can be expensive)"
    required: false
    default: 'false'
  args:
    description: "Optional arguments to append to the Nx command"
    required: false
    default: ''
runs:
  using: 'composite'
  steps: 
    - run: bash ${{ github.action_path }}/script.sh
      shell: bash
branding:
  icon: 'droplet' # Nx's logo contains a wave, lets use a droplet
  color: 'blue'
